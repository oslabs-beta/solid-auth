import{j as pe,k as ve,l as j,m as he,n as ye,o as ee,p as te,q as re,s as O,r as me,$ as be}from"./web-BZwEqE-T.js";const we="http://sr";function ge(e,t){if(e==null)throw new Error(t);return e}const Se=ve(),ne=()=>ge(pe(Se),"<A> and 'use' router primitives can be only used inside a Route."),Ee=()=>ne().navigatorFactory();let Re;function ze(){return Re}const xe="Location",Ae=5e3,Ie=18e4;let g=new Map;setInterval(()=>{const e=Date.now();for(let[t,r]of g.entries())!r[3].count&&e-r[0]>Ie&&g.delete(t)},3e5);function _(){return g}function Oe(e,t=!0){return te(()=>{const r=Date.now();ie(e,n=>{t&&(n[0]=0),n[3][1](r)})})}function ie(e,t){e&&!Array.isArray(e)&&(e=[e]);for(let r of g.keys())(e===void 0||$e(r,e))&&t(g.get(r))}function A(e,t){e.GET&&(e=e.GET);const r=(...n)=>{const i=_(),a=ze(),s=re()?Ee():void 0,c=Date.now(),d=t+k(n);let u=i.get(d),f;if(he()&&!ye&&(f=!0,ee(()=>u[3].count--)),u&&u[0]&&(u[3].count||Date.now()-u[0]<Ae)){f&&(u[3].count++,u[3][0]()),u[2]==="preload"&&a!=="preload"&&(u[0]=c);let l=u[1];return l="then"in u[1]?u[1].then(v(!1),v(!0)):v(!1)(u[1]),l}let p=O.context&&O.has(d)?O.load(d):e(...n);return u?(u[0]=c,u[1]=p,u[2]=a):(i.set(d,u=[c,p,a,j(c)]),u[3].count=0),f&&(u[3].count++,u[3][0]()),p="then"in p?p.then(v(!1),v(!0)):v(!1)(p),p;function v(l){return async y=>{if(y instanceof Response){const S=y.headers.get(xe);if(S!==null){s&&S.startsWith("/")?te(()=>{s(S,{replace:!0})}):window.location.href=S;return}y.customBody&&(y=await y.customBody())}if(l)throw y;return y}}};return r.keyFor=(...n)=>t+k(n),r.key=t,r}A.set=(e,t)=>{const r=_(),n=Date.now();let i=r.get(e);i?(i[0]=n,i[1]=t,i[2]="preload"):(r.set(e,i=[n,t,,j(n)]),i[3].count=0)};A.clear=()=>_().clear();function $e(e,t){for(let r of t)if(e.startsWith(r))return!0;return!1}function k(e){return JSON.stringify(e,(t,r)=>Fe(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Fe(e){let t;return e!=null&&typeof e=="object"&&(!(t=Object.getPrototypeOf(e))||t===Object.prototype)}const V=new Map;function Pe(e,t){const r=ne(),n=me(()=>r.submissions[0]().filter(i=>i.url===e.toString()&&!t));return new Proxy([],{get(i,a){return a===be?n():a==="pending"?n().some(o=>!o.result):n()[a]}})}function ar(e,t){const r=Pe(e,t);return new Proxy({},{get(n,i){return r.length===0&&i==="clear"||i==="retry"?()=>{}:r[r.length-1]?.[i]}})}function ae(e,t){function r(...i){const a=this.r,o=this.f,s=(a.singleFlight&&e.withOptions?e.withOptions({headers:{"X-Single-Flight":"true"}}):e)(...i),[c,d]=j();let u;function f(p){return async v=>{const l=await ke(v,p,a.navigatorFactory());if(!l)return u.clear();if(d(l),l.error&&!o)throw l.error;return l.data}}return a.submissions[1](p=>[...p,u={input:i,url:n,get result(){return c()?.data},get error(){return c()?.error},get pending(){return!c()},clear(){a.submissions[1](v=>v.filter(l=>l.input!==i))},retry(){return d(void 0),e(...i).then(f(),f(!0))}}]),s.then(f(),f(!0))}const n=e.url||t||`https://action/${Te(e.toString())}`;return se(r,n)}function se(e,t){return e.toString=()=>{if(!t)throw new Error("Client Actions need explicit names if server rendered");return t},e.with=function(...r){const n=function(...a){return e.call(this,...r,...a)},i=new URL(t,we);return i.searchParams.set("args",k(r)),se(n,(i.origin==="https://action"?i.origin:"")+i.pathname+i.search)},e.url=t,V.set(t,e),re()&&ee(()=>V.delete(t)),e}const Te=e=>e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0);async function ke(e,t,r){let n,i,a,o;if(e instanceof Response){if(e.headers.has("X-Revalidate")&&(a=e.headers.get("X-Revalidate").split(",")),e.customBody&&(n=i=await e.customBody(),e.headers.has("X-Single-Flight")&&(n=n._$value,delete i._$value,o=Object.keys(i))),e.headers.has("Location")){const s=e.headers.get("Location")||"/";s.startsWith("http")?window.location.href=s:r(s)}}else{if(t)return{error:e};n=e}return ie(a,s=>s[0]=0),o&&o.forEach(s=>A.set(s,i[s])),await Oe(a,!1),n!=null?{data:n}:void 0}var Ce=(e=>(e[e.AggregateError=1]="AggregateError",e[e.ArrowFunction=2]="ArrowFunction",e[e.ErrorPrototypeStack=4]="ErrorPrototypeStack",e[e.ObjectAssign=8]="ObjectAssign",e[e.BigIntTypedArray=16]="BigIntTypedArray",e))(Ce||{});function Ue(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"\f":return"\\f";case"<":return"\\x3C";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return}}function m(e){let t="",r=0,n;for(let i=0,a=e.length;i<a;i++)n=Ue(e[i]),n&&(t+=e.slice(r,i)+n,r=i+1);return r===0?t=e:t+=e.slice(r),t}var E="__SEROVAL_REFS__";function C(e,t){if(!e)throw t}var oe=new Map,R=new Map;function U(e){return oe.has(e)}function je(e){return C(U(e),new mt(e)),oe.get(e)}typeof globalThis<"u"?Object.defineProperty(globalThis,E,{value:R,configurable:!0,writable:!1,enumerable:!1}):typeof window<"u"?Object.defineProperty(window,E,{value:R,configurable:!0,writable:!1,enumerable:!1}):typeof self<"u"?Object.defineProperty(self,E,{value:R,configurable:!0,writable:!1,enumerable:!1}):typeof global<"u"&&Object.defineProperty(global,E,{value:R,configurable:!0,writable:!1,enumerable:!1});function ue(e,t){for(let r=0,n=t.length;r<n;r++){let i=t[r];e.has(i)||(e.add(i),i.extends&&ue(e,i.extends))}}function _e(e){if(e){let t=new Set;return ue(t,e),[...t]}}var ce={[Symbol.asyncIterator]:0,[Symbol.hasInstance]:1,[Symbol.isConcatSpreadable]:2,[Symbol.iterator]:3,[Symbol.match]:4,[Symbol.matchAll]:5,[Symbol.replace]:6,[Symbol.search]:7,[Symbol.species]:8,[Symbol.split]:9,[Symbol.toPrimitive]:10,[Symbol.toStringTag]:11,[Symbol.unscopables]:12},Me={0:"Error",1:"EvalError",2:"RangeError",3:"ReferenceError",4:"SyntaxError",5:"TypeError",6:"URIError"};function h(e){return{t:2,i:void 0,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}var K=h(2),W=h(3),De=h(1),Le=h(0),Be=h(4),Ne=h(5),Ve=h(6),Ke=h(7);function M(e){return e instanceof EvalError?1:e instanceof RangeError?2:e instanceof ReferenceError?3:e instanceof SyntaxError?4:e instanceof TypeError?5:e instanceof URIError?6:0}function We(e){let t=Me[M(e)];return e.name!==t?{name:e.name}:e.constructor.name!==t?{name:e.constructor.name}:{}}function q(e,t){let r=We(e),n=Object.getOwnPropertyNames(e);for(let i=0,a=n.length,o;i<a;i++)o=n[i],o!=="name"&&o!=="message"&&(o==="stack"?t&4&&(r=r||{},r[o]=e[o]):(r=r||{},r[o]=e[o]));return r}function de(e){return Object.isFrozen(e)?3:Object.isSealed(e)?2:Object.isExtensible(e)?0:1}function qe(e){switch(e){case Number.POSITIVE_INFINITY:return Ne;case Number.NEGATIVE_INFINITY:return Ve}return e!==e?Ke:Object.is(e,-0)?Be:{t:0,i:void 0,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function X(e){return{t:1,i:void 0,s:m(e),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Xe(e){return{t:3,i:void 0,s:""+e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function He(e){return{t:4,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Ge(e,t){return{t:5,i:e,s:t.toISOString(),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,f:void 0,a:void 0,b:void 0,o:void 0}}function Je(e,t){return{t:6,i:e,s:void 0,l:void 0,c:m(t.source),m:t.flags,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Ye(e,t){let r=new Uint8Array(t),n=r.length,i=new Array(n);for(let a=0;a<n;a++)i[a]=r[a];return{t:19,i:e,s:i,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Ze(e,t){return{t:17,i:e,s:ce[t],l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function H(e,t){return{t:18,i:e,s:m(je(t)),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Qe(e,t,r){return{t:25,i:e,s:r,l:void 0,c:m(t),m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function et(e,t,r){return{t:9,i:e,s:void 0,l:t.length,c:void 0,m:void 0,p:void 0,e:void 0,a:r,f:void 0,b:void 0,o:de(t)}}function tt(e,t){return{t:21,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function rt(e,t,r){return{t:15,i:e,s:void 0,l:t.length,c:t.constructor.name,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:t.byteOffset,o:void 0}}function nt(e,t,r){return{t:16,i:e,s:void 0,l:t.length,c:t.constructor.name,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:t.byteOffset,o:void 0}}function it(e,t,r){return{t:20,i:e,s:void 0,l:t.byteLength,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:t.byteOffset,o:void 0}}function at(e,t,r){return{t:13,i:e,s:M(t),l:void 0,c:void 0,m:m(t.message),p:r,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function st(e,t,r){return{t:14,i:e,s:M(t),l:void 0,c:void 0,m:m(t.message),p:r,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function ot(e,t,r){return{t:7,i:e,s:void 0,l:t,c:void 0,m:void 0,p:void 0,e:void 0,a:r,f:void 0,b:void 0,o:void 0}}function ut(e,t){return{t:28,i:void 0,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[e,t],f:void 0,b:void 0,o:void 0}}function ct(e,t){return{t:30,i:void 0,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[e,t],f:void 0,b:void 0,o:void 0}}function dt(e,t,r){return{t:31,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:r,f:t,b:void 0,o:void 0}}function lt(e,t){return{t:32,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function ft(e,t){return{t:33,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function pt(e,t){return{t:34,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}var{toString:D}=Object.prototype;function vt(e,t){return t instanceof Error?`Seroval caught an error during the ${e} process.
  
${t.name}
${t.message}

- For more information, please check the "cause" property of this error.
- If you believe this is an error in Seroval, please submit an issue at https://github.com/lxsmnsyc/seroval/issues/new`:`Seroval caught an error during the ${e} process.

"${D.call(t)}"

For more information, please check the "cause" property of this error.`}var ht=class extends Error{constructor(t,r){super(vt(t,r)),this.cause=r}},yt=class extends ht{constructor(e){super("parsing",e)}},x=class extends Error{constructor(t){super(`The value ${D.call(t)} of type "${typeof t}" cannot be parsed/serialized.
      
There are few workarounds for this problem:
- Transform the value in a way that it can be serialized.
- If the reference is present on multiple runtimes (isomorphic), you can use the Reference API to map the references.`),this.value=t}},mt=class extends Error{constructor(e){super('Missing reference for the value "'+D.call(e)+'" of type "'+typeof e+'"'),this.value=e}},bt=class{constructor(t,r){this.value=t,this.replacement=r}},wt={},gt={},St={0:{},1:{},2:{},3:{},4:{}};function Et(e){return"__SEROVAL_STREAM__"in e}function L(){let e=new Set,t=[],r=!0,n=!0;function i(s){for(let c of e.keys())c.next(s)}function a(s){for(let c of e.keys())c.throw(s)}function o(s){for(let c of e.keys())c.return(s)}return{__SEROVAL_STREAM__:!0,on(s){r&&e.add(s);for(let c=0,d=t.length;c<d;c++){let u=t[c];c===d-1&&!r?n?s.return(u):s.throw(u):s.next(u)}return()=>{r&&e.delete(s)}},next(s){r&&(t.push(s),i(s))},throw(s){r&&(t.push(s),a(s),r=!1,n=!1,e.clear())},return(s){r&&(t.push(s),o(s),r=!1,n=!0,e.clear())}}}function Rt(e){let t=L(),r=e[Symbol.asyncIterator]();async function n(){try{let i=await r.next();i.done?t.return(i.value):(t.next(i.value),await n())}catch(i){t.throw(i)}}return n().catch(()=>{}),t}function zt(e){let t=[],r=-1,n=-1,i=e[Symbol.iterator]();for(;;)try{let a=i.next();if(t.push(a.value),a.done){n=t.length-1;break}}catch(a){r=t.length,t.push(a)}return{v:t,t:r,d:n}}async function xt(e){try{return[1,await e]}catch(t){return[0,t]}}var At=class{constructor(e){this.marked=new Set,this.plugins=e.plugins,this.features=31^(e.disabledFeatures||0),this.refs=e.refs||new Map}markRef(e){this.marked.add(e)}isMarked(e){return this.marked.has(e)}getIndexedValue(e){let t=this.refs.get(e);if(t!=null)return this.markRef(t),{type:1,value:He(t)};let r=this.refs.size;return this.refs.set(e,r),{type:0,value:r}}getReference(e){let t=this.getIndexedValue(e);return t.type===1?t:U(e)?{type:2,value:H(t.value,e)}:t}getStrictReference(e){C(U(e),new x(e));let t=this.getIndexedValue(e);return t.type===1?t.value:H(t.value,e)}parseFunction(e){return this.getStrictReference(e)}parseWellKnownSymbol(e){let t=this.getReference(e);return t.type!==0?t.value:(C(e in ce,new x(e)),Ze(t.value,e))}parseSpecialReference(e){let t=this.getIndexedValue(St[e]);return t.type===1?t.value:{t:26,i:t.value,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}parseIteratorFactory(){let e=this.getIndexedValue(wt);return e.type===1?e.value:{t:27,i:e.value,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:this.parseWellKnownSymbol(Symbol.iterator),b:void 0,o:void 0}}parseAsyncIteratorFactory(){let e=this.getIndexedValue(gt);return e.type===1?e.value:{t:29,i:e.value,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[this.parseSpecialReference(1),this.parseWellKnownSymbol(Symbol.asyncIterator)],f:void 0,b:void 0,o:void 0}}createObjectNode(e,t,r,n){return{t:r?11:10,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:n,e:void 0,a:void 0,f:void 0,b:void 0,o:de(t)}}createMapNode(e,t,r,n){return{t:8,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:{k:t,v:r,s:n},a:void 0,f:this.parseSpecialReference(0),b:void 0,o:void 0}}createPromiseConstructorNode(e){return{t:22,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:this.parseSpecialReference(1),b:void 0,o:void 0}}},It=class extends At{async parseItems(e){let t=[];for(let r=0,n=e.length;r<n;r++)r in e&&(t[r]=await this.parse(e[r]));return t}async parseArray(e,t){return et(e,t,await this.parseItems(t))}async parseProperties(e){let t=Object.entries(e),r=[],n=[];for(let a=0,o=t.length;a<o;a++)r.push(m(t[a][0])),n.push(await this.parse(t[a][1]));let i=Symbol.iterator;return i in e&&(r.push(this.parseWellKnownSymbol(i)),n.push(ut(this.parseIteratorFactory(),await this.parse(zt(e))))),i=Symbol.asyncIterator,i in e&&(r.push(this.parseWellKnownSymbol(i)),n.push(ct(this.parseAsyncIteratorFactory(),await this.parse(Rt(e))))),i=Symbol.toStringTag,i in e&&(r.push(this.parseWellKnownSymbol(i)),n.push(X(e[i]))),i=Symbol.isConcatSpreadable,i in e&&(r.push(this.parseWellKnownSymbol(i)),n.push(e[i]?K:W)),{k:r,v:n,s:r.length}}async parsePlainObject(e,t,r){return this.createObjectNode(e,t,r,await this.parseProperties(t))}async parseBoxed(e,t){return tt(e,await this.parse(t.valueOf()))}async parseTypedArray(e,t){return rt(e,t,await this.parse(t.buffer))}async parseBigIntTypedArray(e,t){return nt(e,t,await this.parse(t.buffer))}async parseDataView(e,t){return it(e,t,await this.parse(t.buffer))}async parseError(e,t){let r=q(t,this.features);return at(e,t,r?await this.parseProperties(r):void 0)}async parseAggregateError(e,t){let r=q(t,this.features);return st(e,t,r?await this.parseProperties(r):void 0)}async parseMap(e,t){let r=[],n=[];for(let[i,a]of t.entries())r.push(await this.parse(i)),n.push(await this.parse(a));return this.createMapNode(e,r,n,t.size)}async parseSet(e,t){let r=[];for(let n of t.keys())r.push(await this.parse(n));return ot(e,t.size,r)}async parsePromise(e,t){let[r,n]=await xt(t);return{t:12,i:e,s:r,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:await this.parse(n),b:void 0,o:void 0}}async parsePlugin(e,t){let r=this.plugins;if(r)for(let n=0,i=r.length;n<i;n++){let a=r[n];if(a.parse.async&&a.test(t))return Qe(e,a.tag,await a.parse.async(t,this,{id:e}))}}async parseStream(e,t){return dt(e,this.parseSpecialReference(4),await new Promise((r,n)=>{let i=[],a=t.on({next:o=>{this.markRef(e),this.parse(o).then(s=>{i.push(lt(e,s))},s=>{n(s),a()})},throw:o=>{this.markRef(e),this.parse(o).then(s=>{i.push(ft(e,s)),r(i),a()},s=>{n(s),a()})},return:o=>{this.markRef(e),this.parse(o).then(s=>{i.push(pt(e,s)),r(i),a()},s=>{n(s),a()})}})}))}async parseObject(e,t){if(Array.isArray(t))return this.parseArray(e,t);if(Et(t))return this.parseStream(e,t);let r=t.constructor;if(r===bt)return this.parse(t.replacement);let n=await this.parsePlugin(e,t);if(n)return n;switch(r){case Object:return this.parsePlainObject(e,t,!1);case void 0:return this.parsePlainObject(e,t,!0);case Date:return Ge(e,t);case RegExp:return Je(e,t);case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return this.parseError(e,t);case Number:case Boolean:case String:case BigInt:return this.parseBoxed(e,t);case ArrayBuffer:return Ye(e,t);case Int8Array:case Int16Array:case Int32Array:case Uint8Array:case Uint16Array:case Uint32Array:case Uint8ClampedArray:case Float32Array:case Float64Array:return this.parseTypedArray(e,t);case DataView:return this.parseDataView(e,t);case Map:return this.parseMap(e,t);case Set:return this.parseSet(e,t)}if(r===Promise||t instanceof Promise)return this.parsePromise(e,t);let i=this.features;if(i&16)switch(r){case BigInt64Array:case BigUint64Array:return this.parseBigIntTypedArray(e,t)}if(i&1&&typeof AggregateError<"u"&&(r===AggregateError||t instanceof AggregateError))return this.parseAggregateError(e,t);if(t instanceof Error)return this.parseError(e,t);if(Symbol.iterator in t||Symbol.asyncIterator in t)return this.parsePlainObject(e,t,!!r);throw new x(t)}async parse(e){try{switch(typeof e){case"boolean":return e?K:W;case"undefined":return De;case"string":return X(e);case"number":return qe(e);case"bigint":return Xe(e);case"object":{if(e){let t=this.getReference(e);return t.type===0?await this.parseObject(t.value,e):t.value}return Le}case"symbol":return this.parseWellKnownSymbol(e);case"function":return this.parseFunction(e);default:throw new x(e)}}catch(t){throw new yt(t)}}},Ot=class extends It{constructor(){super(...arguments),this.mode="vanilla"}};function $t(e){return(0,eval)(e)}async function le(e,t={}){let r=_e(t.plugins),n=new Ot({plugins:r,disabledFeatures:t.disabledFeatures});return{t:await n.parse(e),f:n.features,m:Array.from(n.marked)}}function $(e){return{detail:e.detail,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var Ft={tag:"seroval-plugins/web/CustomEvent",test(e){return typeof CustomEvent>"u"?!1:e instanceof CustomEvent},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse($(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse($(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse($(e))}}},serialize(e,t){return"new CustomEvent("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new CustomEvent(t.deserialize(e.type),t.deserialize(e.options))}},Pt=Ft,Tt={tag:"seroval-plugins/web/DOMException",test(e){return typeof DOMException>"u"?!1:e instanceof DOMException},parse:{sync(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}},async async(e,t){return{name:await t.parse(e.name),message:await t.parse(e.message)}},stream(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}}},serialize(e,t){return"new DOMException("+t.serialize(e.message)+","+t.serialize(e.name)+")"},deserialize(e,t){return new DOMException(t.deserialize(e.message),t.deserialize(e.name))}},kt=Tt;function F(e){return{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var Ct={tag:"seroval-plugins/web/Event",test(e){return typeof Event>"u"?!1:e instanceof Event},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse(F(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse(F(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse(F(e))}}},serialize(e,t){return"new Event("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Event(t.deserialize(e.type),t.deserialize(e.options))}},Ut=Ct,jt={tag:"seroval-plugins/web/File",test(e){return typeof File>"u"?!1:e instanceof File},parse:{async async(e,t){return{name:await t.parse(e.name),options:await t.parse({type:e.type,lastModified:e.lastModified}),buffer:await t.parse(await e.arrayBuffer())}}},serialize(e,t){return"new File(["+t.serialize(e.buffer)+"],"+t.serialize(e.name)+","+t.serialize(e.options)+")"},deserialize(e,t){return new File([t.deserialize(e.buffer)],t.deserialize(e.name),t.deserialize(e.options))}},_t=jt;function P(e){let t=[];return e.forEach((r,n)=>{t.push([n,r])}),t}var b={},Mt={tag:"seroval-plugins/web/FormDataFactory",test(e){return e===b},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,t){return t.createEffectfulFunction(["e","f","i","s","t"],"f=new FormData;for(i=0,s=e.length;i<s;i++)f.append((t=e[i])[0],t[1]);return f")},deserialize(){return b}},Dt={tag:"seroval-plugins/web/FormData",extends:[_t,Mt],test(e){return typeof FormData>"u"?!1:e instanceof FormData},parse:{sync(e,t){return{factory:t.parse(b),entries:t.parse(P(e))}},async async(e,t){return{factory:await t.parse(b),entries:await t.parse(P(e))}},stream(e,t){return{factory:t.parse(b),entries:t.parse(P(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.entries)+")"},deserialize(e,t){let r=new FormData,n=t.deserialize(e.entries);for(let i=0,a=n.length;i<a;i++){let o=n[i];r.append(o[0],o[1])}return r}},Lt=Dt;function T(e){let t=[];return e.forEach((r,n)=>{t.push([n,r])}),t}var Bt={tag:"seroval-plugins/web/Headers",test(e){return typeof Headers>"u"?!1:e instanceof Headers},parse:{sync(e,t){return t.parse(T(e))},async async(e,t){return await t.parse(T(e))},stream(e,t){return t.parse(T(e))}},serialize(e,t){return"new Headers("+t.serialize(e)+")"},deserialize(e,t){return new Headers(t.deserialize(e))}},B=Bt,w={},Nt={tag:"seroval-plugins/web/ReadableStreamFactory",test(e){return e===w},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,t){return t.createFunction(["d"],"new ReadableStream({start:"+t.createEffectfulFunction(["c"],"d.on({next:"+t.createEffectfulFunction(["v"],"c.enqueue(v)")+",throw:"+t.createEffectfulFunction(["v"],"c.error(v)")+",return:"+t.createEffectfulFunction([],"c.close()")+"})")+"})")},deserialize(){return w}};function G(e){let t=L(),r=e.getReader();async function n(){try{let i=await r.read();i.done?t.return(i.value):(t.next(i.value),await n())}catch(i){t.throw(i)}}return n().catch(()=>{}),t}var Vt={tag:"seroval/plugins/web/ReadableStream",extends:[Nt],test(e){return typeof ReadableStream>"u"?!1:e instanceof ReadableStream},parse:{sync(e,t){return{factory:t.parse(w),stream:t.parse(L())}},async async(e,t){return{factory:await t.parse(w),stream:await t.parse(G(e))}},stream(e,t){return{factory:t.parse(w),stream:t.parse(G(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.stream)+")"},deserialize(e,t){let r=t.deserialize(e.stream);return new ReadableStream({start(n){r.on({next(i){n.enqueue(i)},throw(i){n.error(i)},return(){n.close()}})}})}},N=Vt;function J(e,t){return{body:t,cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var Kt={tag:"seroval-plugins/web/Request",extends:[N,B],test(e){return typeof Request>"u"?!1:e instanceof Request},parse:{async async(e,t){return{url:await t.parse(e.url),options:await t.parse(J(e,e.body?await e.clone().arrayBuffer():null))}},stream(e,t){return{url:t.parse(e.url),options:t.parse(J(e,e.clone().body))}}},serialize(e,t){return"new Request("+t.serialize(e.url)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Request(t.deserialize(e.url),t.deserialize(e.options))}},Wt=Kt;function Y(e){return{headers:e.headers,status:e.status,statusText:e.statusText}}var qt={tag:"seroval-plugins/web/Response",extends:[N,B],test(e){return typeof Response>"u"?!1:e instanceof Response},parse:{async async(e,t){return{body:await t.parse(e.body?await e.clone().arrayBuffer():null),options:await t.parse(Y(e))}},stream(e,t){return{body:t.parse(e.clone().body),options:t.parse(Y(e))}}},serialize(e,t){return"new Response("+t.serialize(e.body)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Response(t.deserialize(e.body),t.deserialize(e.options))}},Xt=qt,Ht={tag:"seroval-plugins/web/URLSearchParams",test(e){return typeof URLSearchParams>"u"?!1:e instanceof URLSearchParams},parse:{sync(e,t){return t.parse(e.toString())},async async(e,t){return await t.parse(e.toString())},stream(e,t){return t.parse(e.toString())}},serialize(e,t){return"new URLSearchParams("+t.serialize(e)+")"},deserialize(e,t){return new URLSearchParams(t.deserialize(e))}},Gt=Ht,Jt={tag:"seroval-plugins/web/URL",test(e){return typeof URL>"u"?!1:e instanceof URL},parse:{sync(e,t){return t.parse(e.href)},async async(e,t){return await t.parse(e.href)},stream(e,t){return t.parse(e.href)}},serialize(e,t){return"new URL("+t.serialize(e)+")"},deserialize(e,t){return new URL(t.deserialize(e))}},Yt=Jt;class Zt{reader;buffer;done;constructor(t){this.reader=t.getReader(),this.buffer=new Uint8Array(0),this.done=!1}async readChunk(){const t=await this.reader.read();if(t.done)this.done=!0;else{let r=new Uint8Array(this.buffer.length+t.value.length);r.set(this.buffer),r.set(t.value,this.buffer.length),this.buffer=r}}async next(){if(this.buffer.length===0)return this.done?{done:!0,value:void 0}:(await this.readChunk(),await this.next());const t=new TextDecoder().decode(this.buffer.subarray(1,11)),r=Number.parseInt(t,16);for(;r>this.buffer.length-12;){if(this.done)throw new Error("Malformed server function stream.");await this.readChunk()}const n=new TextDecoder().decode(this.buffer.subarray(12,12+r));return this.buffer=this.buffer.subarray(12+r),{done:!1,value:$t(n)}}async drain(){for(;!(await this.next()).done;);}}async function Z(e,t){if(!t.body)throw new Error("missing body");const r=new Zt(t.body),n=await r.next();return n.done||r.drain().then(()=>{delete $R[e]},()=>{}),n.value}let Qt=0;function z(e,t,r,n){return fetch(e,{method:"POST",...n,headers:{...n.headers,"X-Server-Id":t,"X-Server-Instance":r}})}const fe=[Pt,kt,Ut,Lt,B,N,Wt,Xt,Gt,Yt];async function Q(e,t,r,n){const i=`server-fn:${Qt++}`,a=await(n.length===0?z(e,t,i,r):n.length===1&&n[0]instanceof FormData?z(e,t,i,{...r,body:n[0]}):n.length===1&&n[0]instanceof URLSearchParams?z(e,t,i,{...r,body:n[0],headers:{...r.headers,"Content-Type":"application/x-www-form-urlencoded"}}):z(e,t,i,{...r,body:JSON.stringify(await Promise.resolve(le(n,{plugins:fe}))),headers:{...r.headers,"Content-Type":"application/json"}}));if(a.headers.get("Location")||a.headers.get("X-Revalidate")||a.headers.get("X-Single-Flight"))return a.body&&(a.customBody=()=>Z(i,a)),a;const o=a.headers.get("Content-Type");let s;if(o&&o.startsWith("text/plain")?s=await a.text():o&&o.startsWith("application/json")?s=await a.json():s=await Z(i,a),a.headers.has("X-Error"))throw s;return s}function I(e,t,r){const n="";return new Proxy(e,{get(i,a,o){if(a==="url")return`${n}/_server?id=${encodeURIComponent(t)}&name=${encodeURIComponent(r)}`;if(a==="GET")return o.withOptions({method:"GET"});if(a==="withOptions"){const s=`${n}/_server/?id=${encodeURIComponent(t)}&name=${encodeURIComponent(r)}`;return c=>{const d=async(...u)=>{const f=c.method&&c.method.toUpperCase()==="GET";return Q(f?s+(u.length?`&args=${encodeURIComponent(JSON.stringify(await Promise.resolve(le(u,{plugins:fe}))))}`:""):`${n}/_server`,`${t}#${r}`,c,f?[]:u)};return d.url=s,d}}return i[a]},apply(i,a,o){return Q(`${n}/_server`,`${t}#${r}`,{},o)}})}const cr=A(I(er,"c_5810","$$function0"),"user"),dr=ae(I(tr,"c_5810","$$function1"));I(rr,"c_5810","$$function2");const lr=ae(I(nr,"c_5810","$$function3"));async function er(){}async function tr(e){}async function rr(e,t){}async function nr(){}export{dr as a,cr as g,lr as l,ar as u};
