import{ssr as d,ssrHydrationKey as h,ssrAttribute as c,escape as a,createComponent as u,isServer as x,getRequestEvent as A,ssrElement as v,mergeProps as F,useAssets as M,NoHydration as I,HydrationScript as N,Hydration as q,renderToString as H,renderToStream as U}from"solid-js/web";import{createSignal as O,onCleanup as D,ErrorBoundary as z,catchError as G,lazy as j,createComponent as J,sharedConfig as w}from"solid-js";import{provideRequestEvent as W}from"solid-js/web/storage";import{g as K,a as Q,s as Y,b as Z,c as T,d as V,e as X}from"./assets/index-DbjfwbOx.js";import{createRouter as ee}from"radix3";import{eventHandler as te}from"h3";import"unctx";import"node:async_hooks";import"unstorage";import"unstorage/drivers/fs-lite";const ne="_increment_eeq8g_1",re={increment:ne};var se=["<button",' type="button">Clicks: <!--$-->',"<!--/--></button>"];const oe=()=>{const[e,n]=O(0);return d(se,h()+c("class",a(re.increment,!0),!1),a(e()))},ae="_loginFormContainer_1a4le_1",ie="_loginBox_1a4le_10",le="_lineBreak_1a4le_137",ce="_signInText_1a4le_145",ue="_lineBreakContainer_1a4le_161",pe="_lineBreakText_1a4le_170",de="_newUserLine_1a4le_178",p={loginFormContainer:ae,loginBox:ie,"log-in-button":"_log-in-button_1a4le_23","google-button":"_google-button_1a4le_49","google-logo":"_google-logo_1a4le_76","form-control":"_form-control_1a4le_85","form-control-group":"_form-control-group_1a4le_108","password-container":"_password-container_1a4le_120","hide-logo":"_hide-logo_1a4le_126",lineBreak:le,signInText:ce,"login-image":"_login-image_1a4le_155",lineBreakContainer:ue,lineBreakText:pe,newUserLine:de},me="/_build/assets/auth-logo-Bwvg09ZW.png",he="/_build/assets/google-Bp_336oh.png",fe="/_build/assets/hide-CcLQG700.png";var ge=["<div","><form","><div","><img",' alt="solidLogo"></div><h2',">Sign In</h2><input",' id="usernameInput" type="email" placeholder="Username"><div',"><input",' id="passwordInput" type="password" placeholder="Password"><img',' alt="hide logo"',"></div><button",' type="submit">Log In</button><div',"></div><button",' type="button"><img',' alt="google-logo"><span>Sign in with Google</span></button><div','><p>New to Solid Auth?</p><a href="#">Create New User</a></div></form></div>'];const _e=()=>d(ge,h()+c("class",a(p.loginFormContainer,!0),!1),c("class",a(p.loginBox,!0),!1),c("class",a(p["login-image"],!0),!1),c("src",a(me,!0),!1),c("class",a(p.signInText,!0),!1),c("class",a(p["form-control"],!0),!1),c("class",a(p["password-container"],!0),!1),c("class",a(p["form-control"],!0),!1),c("src",a(fe,!0),!1),c("class",a(p["hide-logo"],!0),!1),c("class",a(p["log-in-button"],!0),!1),c("class",a(p.lineBreakContainer,!0),!1),c("class",a(p["google-button"],!0),!1),c("src",a(he,!0),!1)+c("class",a(p["google-logo"],!0),!1),c("class",a(p.newUserLine,!0),!1));function $e(){return[u(oe,{}),u(_e,{})]}const B=x?e=>{const n=A();return n.response.status=e.code,n.response.statusText=e.text,D(()=>!n.nativeEvent.handled&&!n.complete&&(n.response.status=200)),null}:e=>null;var ve=["<span",' style="font-size:1.5em;text-align:center;position:fixed;left:0px;bottom:55%;width:100%;">',"</span>"],we=["<span",' style="font-size:1.5em;text-align:center;position:fixed;left:0px;bottom:55%;width:100%;">500 | Internal Server Error</span>'];const ye=e=>{const n=x?"500 | Internal Server Error":"Error | Uncaught Client Exception";return u(z,{fallback:t=>(console.error(t),[d(ve,h(),a(n)),u(B,{code:500})]),get children(){return e.children}})},be=e=>{let n=!1;const t=G(()=>e.children,o=>{console.error(o),n=!!o});return n?[d(we,h()),u(B,{code:500})]:t};var Ee=" ";const Te={style:e=>v("style",e.attrs,()=>a(e.children),!0),link:e=>v("link",e.attrs,void 0,!0),script:e=>e.attrs.src?v("script",F(()=>e.attrs,{get id(){return e.key}}),()=>d(Ee),!0):null,noscript:e=>v("noscript",e.attrs,()=>a(e.children),!0)};function y(e,n){let{tag:t,attrs:{key:o,...s}={key:void 0},children:i}=e;return Te[t]({attrs:{...s,nonce:n},key:o,children:i})}var S=["<script",">","<\/script>"],Se=["<script",' type="module"'," async","><\/script>"],Ce=["<script",' type="module" async',"><\/script>"];const ke=d("<!DOCTYPE html>");function L(e,n,t=[]){for(let o=0;o<n.length;o++){const s=n[o];if(s.path!==e[0].path)continue;let i=[...t,s];if(s.children){const r=e.slice(1);if(r.length===0||(i=L(r,s.children,i),!i))continue}return i}}function xe(e){const n=A(),t=n.nonce;let o=[];return Promise.resolve().then(async()=>{let s=[];if(n.router&&n.router.matches){const i=[...n.router.matches];for(;i.length&&(!i[0].info||!i[0].info.filesystem);)i.shift();const r=i.length&&L(i,n.routes);if(r){const l=globalThis.MANIFEST.client.inputs;for(let _=0;_<r.length;_++){const m=r[_],$=l[m.$component.src];s.push($.assets())}}}o=await Promise.all(s).then(i=>[...new Map(i.flat().map(r=>[r.attrs.key,r])).values()].filter(r=>r.attrs.rel==="modulepreload"&&!n.assets.find(l=>l.attrs.key===r.attrs.key)))}),M(()=>o.length?o.map(s=>y(s)):void 0),u(I,{get children(){return[ke,u(be,{get children(){return u(e.document,{get assets(){return[u(N,{}),n.assets.map(s=>y(s,t))]},get scripts(){return t?[d(S,h()+c("nonce",a(t,!0),!1),`window.manifest = ${JSON.stringify(n.manifest)}`),d(Se,h(),c("nonce",a(t,!0),!1),c("src",a(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]:[d(S,h(),`window.manifest = ${JSON.stringify(n.manifest)}`),d(Ce,h(),c("src",a(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]},get children(){return u(q,{get children(){return u(ye,{get children(){return u($e,{})}})}})}})}})]}})}const Ae={preload(){K()}},R=[{page:!0,$component:{src:"src/routes/[...404].tsx?pick=default&pick=$css",build:()=>import("./_...404_.js"),import:()=>import("./_...404_.js")},path:"/*404",filePath:"/home/ssmoss/Desktop/solid-auth/test-folder/src/routes/[...404].tsx"},{page:!0,$component:{src:"src/routes/index.tsx?pick=default&pick=$css",build:()=>import("./index.js"),import:()=>import("./index.js")},$$route:{require:()=>({route:Ae}),src:"src/routes/index.tsx?pick=route"},path:"/",filePath:"/home/ssmoss/Desktop/solid-auth/test-folder/src/routes/index.tsx"},{page:!0,$component:{src:"src/routes/login.tsx?pick=default&pick=$css",build:()=>import("./login.js"),import:()=>import("./login.js")},path:"/login",filePath:"/home/ssmoss/Desktop/solid-auth/test-folder/src/routes/login.tsx"}],Ie=Be(R.filter(e=>e.page));function Be(e){function n(t,o,s,i){const r=Object.values(t).find(l=>s.startsWith(l.id+"/"));return r?(n(r.children||(r.children=[]),o,s.slice(r.id.length)),t):(t.push({...o,id:s,path:s.replace(/\/\([^)/]+\)/g,"").replace(/\([^)/]+\)/g,"")}),t)}return e.sort((t,o)=>t.path.length-o.path.length).reduce((t,o)=>n(t,o,o.path,o.path),[])}function Le(e,n){const t=Pe.lookup(e);if(t&&t.route){const o=t.route[`$${n}`];return o===void 0?void 0:{handler:o,params:t.params}}}function Re(e){return e.$GET||e.$POST||e.$PUT||e.$PATCH||e.$DELETE}const Pe=ee({routes:R.reduce((e,n)=>{if(!Re(n))return e;let t=n.path.replace(/\/\([^)/]+\)/g,"").replace(/\([^)/]+\)/g,"").replace(/\*([^/]*)/g,(o,s)=>`**:${s}`);if(/:[^/]*\?/g.test(t))throw new Error(`Optional parameters are not supported in API routes: ${t}`);if(e[t])throw new Error(`Duplicate API routes for "${t}" found at "${e[t].route.path}" and "${n.path}"`);return e[t]={route:n},e},{})});function Fe(e){e.forEach(n=>{if(!n.attrs.href)return;let t=document.head.querySelector(`link[href="${n.attrs.href}"]`);t||(t=document.createElement("link"),t.setAttribute("rel","preload"),t.setAttribute("as","style"),t.setAttribute("href",n.attrs.href),document.head.appendChild(t))})}function Me(e,n,t,o="default"){return j(async()=>{{const i=(await e.import())[o],l=(await n.inputs?.[e.src].assets()).filter(m=>m.tag==="style"||m.attrs.rel==="stylesheet");return typeof window<"u"&&Fe(l),{default:m=>[...l.map($=>y($)),J(i,m)]}}})}function Ne(){function e(t){return{...t,...t.$$route?t.$$route.require().route:void 0,info:{...t.$$route?t.$$route.require().route.info:{},filesystem:!0},component:t.$component&&Me(t.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:t.children?t.children.map(e):void 0}}return Ie.map(e)}function qe(e){const n=Q(e.nativeEvent,"flash");if(!n)return;let t=JSON.parse(n);if(!t||!t.result)return;const o=[...t.input.slice(0,-1),new Map(t.input[t.input.length-1])];Y(e.nativeEvent,"flash","",{maxAge:0});const s=t.error?new Error(t.result):t.result;return{input:o,url:t.url,pending:!1,result:t.thrown?void 0:s,error:t.thrown?s:void 0}}async function He(e){const n=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,e.response.headers.set("Content-Type","text/html"),Object.assign(e,{manifest:await n.json(),assets:[...await n.inputs[n.handler].assets()],router:{submission:qe(e)},routes:Ne(),complete:!1,$islands:new Set})}const Ue=new Set([301,302,303,307,308]);function b(e){return e.status&&Ue.has(e.status)?e.status:302}function Oe(e,n,t={}){return te({handler:o=>{const s=Z(o);return W(s,async()=>{const i=Le(new URL(s.request.url).pathname,s.request.method);if(i){const g=(await i.handler.import())[s.request.method];s.params=i.params||{},w.context={event:s};const E=await g(s);if(E!==void 0)return E;if(s.request.method!=="GET")throw new Error(`API handler for ${s.request.method} "${s.request.url}" did not return a response.`)}const r=await n(s),l=typeof t=="function"?await t(r):{...t},_=l.mode||"stream";if(l.nonce&&(r.nonce=l.nonce),_==="sync"){const f=H(()=>(w.context.event=r,e(r)),l);if(r.complete=!0,r.response&&r.response.headers.get("Location")){const g=b(r.response);return T(o,r.response.headers.get("Location"),g)}return f}if(l.onCompleteAll){const f=l.onCompleteAll;l.onCompleteAll=g=>{k(r)(g),f(g)}}else l.onCompleteAll=k(r);if(l.onCompleteShell){const f=l.onCompleteShell;l.onCompleteShell=g=>{C(r,o)(),f(g)}}else l.onCompleteShell=C(r,o);const m=U(()=>(w.context.event=r,e(r)),l);if(r.response&&r.response.headers.get("Location")){const f=b(r.response);return T(o,r.response.headers.get("Location"),f)}if(_==="async")return m;const{writable:$,readable:P}=new TransformStream;return m.pipeTo($),P})}})}function C(e,n){return()=>{if(e.response&&e.response.headers.get("Location")){const t=b(e.response);V(n,t),X(n,"Location",e.response.headers.get("Location"))}}}function k(e){return({write:n})=>{e.complete=!0;const t=e.response&&e.response.headers.get("Location");t&&n(`<script>window.location="${t}"<\/script>`)}}function De(e,n){return Oe(e,He,n)}var ze=['<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico">',"</head>"],Ge=["<html",' lang="en">','<body><div id="app">',"</div><!--$-->","<!--/--></body></html>"];const tt=De(()=>u(xe,{document:({assets:e,children:n,scripts:t})=>d(Ge,h(),u(I,{get children(){return d(ze,a(e))}}),a(n),a(t))}));export{tt as default};
